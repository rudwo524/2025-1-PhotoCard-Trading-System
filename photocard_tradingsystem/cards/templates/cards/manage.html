<h2>ğŸ“‹ ë°œê¸‰ëœ ì¹´ë“œ ê´€ë¦¬</h2>

<form method="get">
  <label>ë“±ê¸‰:</label>
  <select name="grade">
    <option value="">ì „ì²´</option>
    {% for g in grades %}
      <option value="{{ g.id }}">{{ g.name }}</option>
    {% endfor %}
  </select>

  <label>ì¹´í…Œê³ ë¦¬:</label>
  <select name="category">
    <option value="">ì „ì²´</option>
    {% for c in categories %}
      <option value="{{ c.id }}">{{ c.name }}</option>
    {% endfor %}
  </select>

  <label>ì†Œìœ ì:</label>
  <select name="owner">
    <option value="">ì „ì²´</option>
    {% for o in owners %}
      <option value="{{ o.id }}">{{ o.username }}</option>
    {% endfor %}
  </select>

  <label>ë°œê¸‰ì¼:</label>
  <input type="date" name="date">

  <label>ì •ë ¬:</label>
  <select name="sort">
    <option value="recent">ìµœì‹ ìˆœ</option>
    <option value="name">ì´ë¦„ìˆœ</option>
    <option value="grade">ë“±ê¸‰ìˆœ</option>
  </select>

  <button type="submit">ì¡°íšŒ</button>
</form>

<form method="GET">
    <fieldset style="border:1px solid #ccc; padding:15px; margin-bottom:20px;">
        <legend>ğŸ” ê²€ìƒ‰</legend>
    
        <label>ì¹´ë“œëª…:</label>
        <input type="text" name="search_name">
    
        <label>ì†Œìœ ì:</label>
        <input type="text" name="search_owner">
    
        <label>ì¹´ë“œ ID:</label>
        <input type="number" name="search_id">
        
        <button type="submit">ì¡°íšŒ</button>
      </fieldset>
    
    
</form>

<hr>
<table border="1" cellpadding="8">
  <thead>
    <tr>
      <th>#</th>
      <th>ì¹´ë“œëª…</th>
      <th>ë“±ê¸‰</th>
      <th>ì¹´í…Œê³ ë¦¬</th>
      <th>ì†Œìœ ì</th>
      <th>ë°œê¸‰ì¼</th>
    </tr>
  </thead>
  <tbody>
    {% for uc in cards %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td>{{ uc.card.name }}</td>
      <td>{{ uc.card.grade }}</td>
      <td>{{ uc.card.category }}</td>
      <td>{{ uc.owner.username }}</td>
      <td>{{ uc.acquired_at|date:"Y-m-d H:i" }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="6">ì¡°ê±´ì— ë§ëŠ” ì¹´ë“œê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>
    {% endfor %}
  </tbody>
</table>

<hr>
<h3>ğŸ“Š ì¹´ë“œ í†µê³„ ëŒ€ì‹œë³´ë“œ</h3>

<p><strong>ì´ ë°œê¸‰ëœ ì¹´ë“œ ìˆ˜:</strong> {{ total_count }}</p>

<h3>ğŸ‘¥ ì‚¬ìš©ìë³„ ë³´ìœ  ì¹´ë“œ ìˆ˜</h3>
<ul>
  {% for row in user_counts %}
    <li>{{ row.owner__username }}: {{ row.count }}ì¥</li>
  {% empty %}
    <li>ë³´ìœ  ì •ë³´ ì—†ìŒ</li>
  {% endfor %}
</ul>

<h3>â­ ë“±ê¸‰ë³„ ì¹´ë“œ ë¶„í¬</h3>
<ul>
  {% for row in grade_counts %}
    <li>{{ row.card__grade__name }}: {{ row.count }}ì¥</li>
  {% empty %}
    <li>ë“±ê¸‰ ì •ë³´ ì—†ìŒ</li>
  {% endfor %}
</ul>